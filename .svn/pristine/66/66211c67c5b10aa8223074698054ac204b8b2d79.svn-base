/*
 * File: app/view/vwprtPrincipalViewController.js
 *
 * This file was generated by Sencha Architect version 4.2.4.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 6.6.x Classic library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 6.6.x Classic. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('plasma.view.vwprtPrincipalViewController', {
    extend: 'Ext.app.ViewController',
    alias: 'controller.vwprtprincipal',

    onMenuUsuariosClick: function(item, e, eOpts) {
        if(!Ext.getCmp('pnlUsuarios'))
        {
            Ext.getCmp('pnlCentral').removeAll();
            var win = Ext.create('plasma.view.pnlUsuarios');
            this.getView().down('#pnlCentral').add(win);
            win.show();
            var strUsuario = Ext.getStore('Usuario');
            strUsuario.removeAll();
            strUsuario.load();
        }
    },

    onMenuInstitucionClick: function(item, e, eOpts) {
        if(!Ext.getCmp('pnlInstitucion'))
        {
            Ext.getCmp('pnlCentral').removeAll();
            var win = Ext.create('plasma.view.pnlInstitucion');
            this.getView().down('#pnlCentral').add(win);
            win.show();
            var strInstitucion = Ext.getStore('Institucion');
            strInstitucion.removeAll();
            strInstitucion.proxy.extraParams={

            };
            strInstitucion.load();


        }
    },

    onMenuMarcadorClick: function(item, e, eOpts) {
        if(!Ext.getCmp('pnlMarcador'))
        {
            Ext.getCmp('pnlCentral').removeAll();
            var win = Ext.create('plasma.view.pnlMarcador');
            this.getView().down('#pnlCentral').add(win);
            win.show();
            var strMarcador = Ext.getStore('Marcador');
            strMarcador.removeAll();

            strMarcador.load();
        }
    },

    onMenuCasaClick: function(item, e, eOpts) {
        if(!Ext.getCmp('pnlCasa'))
        {
            Ext.getCmp('pnlCentral').removeAll();
            var win = Ext.create('plasma.view.pnlCasa');
            this.getView().down('#pnlCentral').add(win);
            win.show();
            var strCasa = Ext.getStore('Casa');
            strCasa.removeAll();

            strCasa.load();
        }
    },

    onMenuKitClick: function(item, e, eOpts) {
        if(!Ext.getCmp('pnlKit'))
        {
            Ext.getCmp('pnlCentral').removeAll();
            var win = Ext.create('plasma.view.pnlKit');
            this.getView().down('#pnlCentral').add(win);
            win.show();
            var strKit = Ext.getStore('Kit');

            strKit.removeAll();
            strKit.proxy.extraParams = {
                bandera: 0
            };
            strKit.load();
        }
    },

    onMenuCodigoClick: function(item, e, eOpts) {
        if(!Ext.getCmp('pnlCodigo'))
        {
            Ext.getCmp('pnlCentral').removeAll();
            var win = Ext.create('plasma.view.pnlCodigo');
            this.getView().down('#pnlCentral').add(win);
            win.show();
            var strCodigo = Ext.getStore('Codigo');
            strCodigo.removeAll();

            strCodigo.load();
        }
    },

    onMenuMuestrasClick: function(item, e, eOpts) {
        if(!Ext.getCmp('pnlMuestras'))
        {
            Ext.getCmp('pnlCentral').removeAll();
            var win = Ext.create('plasma.view.pnlMuestras');
            this.getView().down('#pnlCentral').add(win);
            win.show();
            var storeMuestra = Ext.getCmp('grdMuestras').getStore();
            storeMuestra.removeAll();
            storeMuestra.proxy.extraParams = {
                busqueda: 3
            };
            storeMuestra.load();
        }
    },

    onMenuReporteClick: function(item, e, eOpts) {

    },

    onMenuSalirClick: function(item, e, eOpts) {
        var viewMain = this;
        Ext.Ajax.request
        (
        {
            url: '../servidor/login/logout',
            success:function(response,options)
            {
                var responseData = Ext.JSON.decode(response.responseText);
                if(responseData.success)
                {
                    viewMain.getView().destroy();
                    Ext.create('plasma.view.vwprtLogin', {renderTo: Ext.getBody()});
                }
            }
        }
        );
    },

    onViewportAfterRender: function(component, eOpts) {
        ME = this;
    }

});
